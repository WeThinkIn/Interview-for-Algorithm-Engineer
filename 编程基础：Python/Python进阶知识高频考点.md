# ç›®å½•

- [1.Pythonä¸­è¿­ä»£å™¨çš„æ¦‚å¿µï¼Ÿ](#1.pythonä¸­è¿­ä»£å™¨çš„æ¦‚å¿µï¼Ÿ)
- [2.Pythonä¸­ç”Ÿæˆå™¨çš„ç›¸å…³çŸ¥è¯†](#2.pythonä¸­ç”Ÿæˆå™¨çš„ç›¸å…³çŸ¥è¯†)
- [3.Pythonä¸­è£…é¥°å™¨çš„ç›¸å…³çŸ¥è¯†](#3.pythonä¸­è£…é¥°å™¨çš„ç›¸å…³çŸ¥è¯†)
- [4.Pythonçš„æ·±æ‹·è´ä¸æµ…æ‹·è´ï¼Ÿ](#4.pythonçš„æ·±æ‹·è´ä¸æµ…æ‹·è´ï¼Ÿ)
- [5.Pythonçš„åƒåœ¾å›æ”¶æœºåˆ¶](#5.pythonçš„åƒåœ¾å›æ”¶æœºåˆ¶)
- [6.Pythonä¸­ $ *args $ å’Œ $ **kwargs $ çš„åŒºåˆ«ï¼Ÿ](#6.pythonä¸­argså’Œkwargsçš„åŒºåˆ«ï¼Ÿ)
- [7.Pythonä¸­Numpyçš„broadcastingæœºåˆ¶ï¼Ÿ](#7.pythonä¸­numpyçš„broadcastingæœºåˆ¶ï¼Ÿ)
- [8.pythonä¸­@staticmethodå’Œ@classmethodä½¿ç”¨æ³¨æ„äº‹é¡¹](#8.pythonä¸­@staticmethodå’Œ@classmethodä½¿ç”¨æ³¨æ„äº‹é¡¹)
- [9.Pythonä¸­æœ‰å“ªäº›å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ](#9.Pythonä¸­æœ‰å“ªäº›å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ)
- [10.Pythonä¸­çš„lambdaè¡¨è¾¾å¼ï¼Ÿ](#10.Pythonä¸­çš„lambdaè¡¨è¾¾å¼ï¼Ÿ)
- [11.ä»‹ç»ä¸€ä¸‹Pythonä¸­çš„å¼•ç”¨è®¡æ•°åŸç†ï¼Œå¦‚ä½•æ¶ˆé™¤ä¸€ä¸ªå˜é‡ä¸Šçš„æ‰€æœ‰å¼•ç”¨è®¡æ•°?](#11.ä»‹ç»ä¸€ä¸‹Pythonä¸­çš„å¼•ç”¨è®¡æ•°åŸç†ï¼Œå¦‚ä½•æ¶ˆé™¤ä¸€ä¸ªå˜é‡ä¸Šçš„æ‰€æœ‰å¼•ç”¨è®¡æ•°?)


<h2 id="1.pythonä¸­è¿­ä»£å™¨çš„æ¦‚å¿µï¼Ÿ">1.Pythonä¸­è¿­ä»£å™¨çš„æ¦‚å¿µï¼Ÿ</h2>

<font color=DeepSkyBlue>å¯è¿­ä»£å¯¹è±¡æ˜¯è¿­ä»£å™¨ã€ç”Ÿæˆå™¨å’Œè£…é¥°å™¨çš„åŸºç¡€ã€‚</font>ç®€å•æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨foræ¥å¾ªç¯éå†çš„å¯¹è±¡å°±æ˜¯å¯è¿­ä»£å¯¹è±¡ã€‚æ¯”å¦‚å¸¸è§çš„listã€setå’Œdictã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªğŸŒ°ï¼š
```
from collections import Iterable
print(isinstance('abcddddd', Iterable))     # stræ˜¯å¦å¯è¿­ä»£

print(isinstance([1,2,3,4,5,6], Iterable))   # listæ˜¯å¦å¯è¿­ä»£

print(isinstance(12345678, Iterable))       # æ•´æ•°æ˜¯å¦å¯è¿­ä»£

-------------ç»“æœå¦‚ä¸‹----------------
True
True
False
```

å½“å¯¹æ‰€æœ‰çš„å¯è¿­ä»£å¯¹è±¡è°ƒç”¨ dir() æ–¹æ³•æ—¶ï¼Œä¼šå‘ç°ä»–ä»¬éƒ½å®ç°äº† iter æ–¹æ³•ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡ iter(object) æ¥è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚

```
x = [1, 2, 3]
y = iter(x)
print(type(x))

print(type(y))

------------ç»“æœå¦‚ä¸‹------------
<class 'list'>
<class 'list_iterator'>
```

å¯ä»¥çœ‹åˆ°è°ƒç”¨iter()ä¹‹åï¼Œå˜æˆäº†ä¸€ä¸ªlist_iteratorçš„å¯¹è±¡ã€‚å¯ä»¥å‘ç°å¢åŠ äº†ä¸€ä¸ª__next__æ–¹æ³•ã€‚<font color=DeepSkyBlue>æ‰€æœ‰å®ç°äº†__iter__å’Œ__next__ä¸¤ä¸ªæ–¹æ³•çš„å¯¹è±¡ï¼Œéƒ½æ˜¯è¿­ä»£å™¨</font>ã€‚

<font color=DeepSkyBlue>è¿­ä»£å™¨æ˜¯å¸¦çŠ¶æ€çš„å¯¹è±¡ï¼Œå®ƒä¼šè®°å½•å½“å‰è¿­ä»£æ‰€åœ¨çš„ä½ç½®ï¼Œä»¥æ–¹ä¾¿ä¸‹æ¬¡è¿­ä»£çš„æ—¶å€™è·å–æ­£ç¡®çš„å…ƒç´ ã€‚</font>__iter__è¿”å›è¿­ä»£å™¨è‡ªèº«ï¼Œ__next__è¿”å›å®¹å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå€¼ï¼Œå¦‚æœå®¹å™¨ä¸­æ²¡æœ‰æ›´å¤šå…ƒç´ äº†ï¼Œåˆ™æŠ›å‡ºStoplterationå¼‚å¸¸ã€‚

```
x = [1, 2, 3]
y = iter(x)
print(next(y))
print(next(y))
print(next(y))
print(next(y))

----------ç»“æœå¦‚ä¸‹----------
1
2
3
Traceback (most recent call last):
  File "/Users/Desktop/test.py", line 6, in <module>
    print(next(y))
StopIteration
```

å¦‚ä½•åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯è¿­ä»£å™¨ï¼Œå’Œåˆ¤æ–­æ˜¯å¦æ˜¯å¯è¿­ä»£å¯¹è±¡çš„æ–¹æ³•å·®ä¸å¤šï¼Œåªè¦æŠŠ Iterable æ¢æˆ Iteratorã€‚

Pythonçš„forå¾ªç¯æœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡ä¸æ–­è°ƒç”¨next()å‡½æ•°å®ç°çš„ï¼Œä¸¾ä¸ªæ —å­ï¼Œä¸‹é¢çš„ä»£ç å…ˆå°†å¯è¿­ä»£å¯¹è±¡è½¬åŒ–ä¸ºIteratorï¼Œå†å»è¿­ä»£ã€‚<font color=DeepSkyBlue>è¿™æ ·å¯ä»¥èŠ‚çœå¯¹å†…å­˜ï¼Œå› ä¸ºè¿­ä»£å™¨åªæœ‰åœ¨æˆ‘ä»¬è°ƒç”¨ next() æ‰ä¼šå®é™…è®¡ç®—ä¸‹ä¸€ä¸ªå€¼</font>ã€‚

```
x = [1, 2, 3]
for elem in x:
    ...
```

![](https://files.mdnice.com/user/33499/88b65d43-fc23-4324-95c0-bc4002523cdc.png)

itertools åº“æä¾›äº†å¾ˆå¤šå¸¸è§è¿­ä»£å™¨çš„ä½¿ç”¨ã€‚ 

```
>>> from itertools import count     # è®¡æ•°å™¨
>>> counter = count(start=13)
>>> next(counter)
13
>>> next(counter)
14
```


<h2 id="2.pythonä¸­ç”Ÿæˆå™¨çš„ç›¸å…³çŸ¥è¯†">2.Pythonä¸­ç”Ÿæˆå™¨çš„ç›¸å…³çŸ¥è¯†</h2>

æˆ‘ä»¬åˆ›å»ºåˆ—è¡¨çš„æ—¶å€™ï¼Œå—åˆ°å†…å­˜é™åˆ¶ï¼Œå®¹é‡è‚¯å®šæ˜¯æœ‰é™çš„ï¼Œè€Œä¸”ä¸å¯èƒ½å…¨éƒ¨ç»™ä»–ä¸€æ¬¡æšä¸¾å‡ºæ¥ã€‚Pythonå¸¸ç”¨çš„åˆ—è¡¨ç”Ÿæˆå¼æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹å°±æ˜¯å®šä¹‰å³ç”Ÿæˆï¼Œéå¸¸çš„æµªè´¹ç©ºé—´å’Œæ•ˆç‡ã€‚

å¦‚æœåˆ—è¡¨å…ƒç´ å¯ä»¥æŒ‰ç…§æŸç§ç®—æ³•æ¨ç®—å‡ºæ¥ï¼Œé‚£æˆ‘ä»¬å¯ä»¥åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­ä¸æ–­æ¨ç®—å‡ºåç»­çš„å…ƒç´ ï¼Œè¿™æ ·å°±ä¸å¿…åˆ›å»ºå®Œæ•´çš„listï¼Œä»è€ŒèŠ‚çœå¤§é‡çš„ç©ºé—´ã€‚åœ¨Pythonä¸­ï¼Œè¿™ç§ä¸€è¾¹å¾ªç¯ä¸€è¾¹è®¡ç®—çš„æœºåˆ¶ï¼Œç§°ä¸ºç”Ÿæˆå™¨ï¼šgeneratorã€‚

è¦åˆ›å»ºä¸€ä¸ªgeneratorï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯æ”¹é€ åˆ—è¡¨ç”Ÿæˆå¼ï¼š

```
a = [x * x for x in range(10)]
print(a)
b = (x * x for x in range(10))
print(b)

--------ç»“æœå¦‚ä¸‹--------------
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
<generator object <genexpr> at 0x10557da50>
```
è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ç”Ÿæˆå™¨å‡½æ•°ï¼Œé€šè¿‡defå®šä¹‰ï¼Œç„¶åä½¿ç”¨yieldæ¥æ”¯æŒè¿­ä»£å™¨åè®®ï¼Œæ¯”è¿­ä»£å™¨å†™èµ·æ¥æ›´ç®€å•ã€‚

```
def spam():
    yield"first"
    yield"second"
    yield"third"

for x in spam():
    print(x)

-------ç»“æœå¦‚ä¸‹---------
first
second
third
```
è¿›è¡Œå‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚åœ¨ä½¿ç”¨next()è°ƒç”¨çš„æ—¶å€™ï¼Œé‡åˆ°yieldå°±è¿”å›ï¼Œè®°å½•æ­¤æ—¶çš„å‡½æ•°è°ƒç”¨ä½ç½®ï¼Œä¸‹æ¬¡è°ƒç”¨next()æ—¶ï¼Œä»æ–­ç‚¹å¤„å¼€å§‹ã€‚

æˆ‘ä»¬å®Œå…¨å¯ä»¥åƒä½¿ç”¨è¿­ä»£å™¨ä¸€æ ·ä½¿ç”¨ generator ï¼Œå½“ç„¶é™¤äº†å®šä¹‰ã€‚å®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨ï¼Œéœ€è¦åˆ†åˆ«å®ç° iter() æ–¹æ³•å’Œ next() æ–¹æ³•ï¼Œä½† generator åªéœ€è¦ä¸€ä¸ªå°å°çš„yieldã€‚

generatorè¿˜æœ‰ send() å’Œ close() æ–¹æ³•ï¼Œéƒ½æ˜¯åªèƒ½åœ¨next()è°ƒç”¨ä¹‹åï¼Œç”Ÿæˆå™¨å¤„äºæŒ‚èµ·çŠ¶æ€æ—¶æ‰èƒ½ä½¿ç”¨çš„ã€‚

pythonæ˜¯æ”¯æŒåç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯å¾®çº¿ç¨‹ï¼Œå°±æ˜¯é€šè¿‡generatoræ¥å®ç°çš„ã€‚é…åˆgeneratoræˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å‡½æ•°çš„è°ƒç”¨å±‚æ¬¡å…³ç³»ä»è€Œè‡ªå·±æ¥è°ƒåº¦çº¿ç¨‹ã€‚

<h2 id="3.pythonä¸­è£…é¥°å™¨çš„ç›¸å…³çŸ¥è¯†">3.Pythonä¸­è£…é¥°å™¨çš„ç›¸å…³çŸ¥è¯†</h2>

è£…é¥°å™¨å…è®¸é€šè¿‡å°†ç°æœ‰å‡½æ•°ä¼ é€’ç»™è£…é¥°å™¨ï¼Œä»è€Œ<font color=DeepSkyBlue>å‘ç°æœ‰å‡½æ•°æ·»åŠ ä¸€äº›é¢å¤–çš„åŠŸèƒ½</font>ï¼Œè¯¥è£…é¥°å™¨å°†æ‰§è¡Œç°æœ‰å‡½æ•°çš„åŠŸèƒ½å’Œæ·»åŠ çš„é¢å¤–åŠŸèƒ½ã€‚

è£…é¥°å™¨æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥è®©å·²æœ‰çš„å‡½æ•°ä¸åšä»»ä½•æ”¹åŠ¨çš„æƒ…å†µä¸‹å¢åŠ åŠŸèƒ½ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ä¸€äº›ä¾‹å­æ¥å…·ä½“è¯´æ˜è£…é¥°å™¨çš„ä½œç”¨ï¼š

å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨è£…é¥°å™¨ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè¿™æ ·æ¥å®ç°åœ¨å‡½æ•°æ‰§è¡Œå‰æ’å…¥æ—¥å¿—ï¼š

```
def foo():
    print('i am foo')

def foo():
    print('foo is running')
    print('i am foo')
```

è™½ç„¶è¿™æ ·å†™æ˜¯æ»¡è¶³äº†éœ€æ±‚ï¼Œä½†æ˜¯æ”¹åŠ¨äº†åŸæœ‰çš„ä»£ç ï¼Œå¦‚æœæœ‰å…¶ä»–çš„å‡½æ•°ä¹Ÿéœ€è¦æ’å…¥æ—¥å¿—çš„è¯ï¼Œå°±éœ€è¦æ”¹å†™æ‰€æœ‰çš„å‡½æ•°ï¼Œè¿™æ ·ä¸èƒ½å¤ç”¨ä»£ç ã€‚

æˆ‘ä»¬å¯ä»¥è¿›è¡Œå¦‚ä¸‹æ”¹å†™ï¼š

```
import logging

def use_log(func):
    logging.warning("%s is running" % func.__name__)
    func()

def bar():
    print('i am bar')

use_log(bar)    #å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥

-------------è¿è¡Œç»“æœå¦‚ä¸‹--------------
WARNING:root:bar is running
i am bar
```
è¿™æ ·å†™çš„ç¡®å¯ä»¥å¤ç”¨æ’å…¥çš„æ—¥å¿—ï¼Œç¼ºç‚¹å°±æ˜¯æ˜¾å¼çš„å°è£…åŸæ¥çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½éšå¼çš„åšè¿™ä»¶äº‹ã€‚

æˆ‘ä»¬å¯ä»¥ç”¨è£…é¥°å™¨æ¥å†™ï¼š

```
import logging

def use_log(func):
    def wrapper(*args, **kwargs):
        logging.warning('%s is running' % func.__name__)
        return func(*args, **kwargs)

    return wrapper


def bar():
    print('I am bar')


bar = use_log(bar)
bar()

------------ç»“æœå¦‚ä¸‹------------
WARNING:root:bar is running
I am bar
```

å…¶ä¸­ï¼Œuse_logå‡½æ•°å°±æ˜¯è£…é¥°å™¨ï¼Œå®ƒæŠŠæˆ‘ä»¬çœŸæ­£æƒ³è¦æ‰§è¡Œçš„å‡½æ•°bar()å°è£…åœ¨é‡Œé¢ï¼Œè¿”å›ä¸€ä¸ªå°è£…äº†åŠ å…¥ä»£ç çš„æ–°å‡½æ•°ï¼Œçœ‹èµ·æ¥å°±åƒæ˜¯bar()è¢«è£…é¥°äº†ä¸€æ ·ã€‚

ä½†æ˜¯è¿™æ ·å†™è¿˜æ˜¯ä¸å¤Ÿéšå¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡@è¯­æ³•ç³–æ¥èµ·åˆ°bar = use_log(bar)çš„ä½œç”¨ã€‚

```
import logging

def use_log(func):
    def wrapper(*args, **kwargs):
        logging.warning('%s is running' % func.__name__)
        return func(*args, **kwargs)

    return wrapper


@use_log
def bar():
    print('I am bar')


@use_log
def haha():
    print('I am haha')


bar()
haha()

------------ç»“æœå¦‚ä¸‹------------
WARNING:root:bar is running
I am bar
WARNING:root:haha is running
I am haha
```

è¿™æ ·å­çœ‹èµ·æ¥å°±éå¸¸ç®€æ´ï¼Œè€Œä¸”ä»£ç å¾ˆå®¹æ˜“å¤ç”¨ã€‚å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§æ™ºèƒ½çš„é«˜çº§å°è£…ã€‚


<h2 id="4.pythonçš„æ·±æ‹·è´ä¸æµ…æ‹·è´ï¼Ÿ">4.Pythonçš„æ·±æ‹·è´ä¸æµ…æ‹·è´ï¼Ÿ</h2>

åœ¨Pythonä¸­ï¼Œç”¨ä¸€ä¸ªå˜é‡ç»™å¦ä¸€ä¸ªå˜é‡èµ‹å€¼ï¼Œå…¶å®å°±æ˜¯ç»™å½“å‰å†…å­˜ä¸­çš„å¯¹è±¡å¢åŠ ä¸€ä¸ªâ€œæ ‡ç­¾â€è€Œå·²ã€‚

```
>>> a = [6, 6, 6, 6]
>>> b = a
>>> print(id(a), id(b), sep = '\n')
66668888
66668888

>>> a is b
Trueï¼ˆå¯ä»¥çœ‹å‡ºï¼Œå…¶å®aå’ŒbæŒ‡å‘å†…å­˜ä¸­åŒä¸€ä¸ªå¯¹è±¡ã€‚ï¼‰
```

<font color=DeepSkyBlue>æµ…æ‹·è´</font>æ˜¯æŒ‡åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå…¶å†…å®¹æ˜¯åŸå¯¹è±¡ä¸­å…ƒç´ çš„å¼•ç”¨ï¼ˆæ–°å¯¹è±¡ä¸åŸå¯¹è±¡å…±äº«å†…å­˜ä¸­çš„å­å¯¹è±¡ï¼‰ã€‚

æ³¨ï¼šæµ…æ‹·è´å’Œæ·±æ‹·è´çš„ä¸åŒä»…ä»…æ˜¯å¯¹ç»„åˆå¯¹è±¡æ¥è¯´ï¼Œæ‰€è°“çš„ç»„åˆå¯¹è±¡å°±æ˜¯åŒ…å«äº†å…¶ä»–å¯¹è±¡çš„å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ï¼Œç±»å®ä¾‹ç­‰ç­‰ã€‚è€Œå¯¹äºæ•°å­—ã€å­—ç¬¦ä¸²ä»¥åŠå…¶ä»–â€œåŸå­â€ç±»å‹ï¼Œæ²¡æœ‰æ‹·è´ä¸€è¯´ï¼Œäº§ç”Ÿçš„éƒ½æ˜¯åŸå¯¹è±¡çš„å¼•ç”¨ã€‚

å¸¸è§çš„æµ…æ‹·è´æœ‰ï¼šåˆ‡ç‰‡æ“ä½œã€å·¥å‚å‡½æ•°ã€å¯¹è±¡çš„copy()æ–¹æ³•ï¼Œcopyæ¨¡å—ä¸­çš„copyå‡½æ•°ã€‚

```
>>> a = [6, 8, 9]
>>> b = list(a)
>>> print(id(a), id(b))
4493469248 4493592128    #aå’Œbçš„åœ°å€ä¸åŒ

>>> for x, y in zip(a, b):
...     print(id(x), id(y))
... 
4489786672 4489786672
4489786736 4489786736
4489786768 4489786768
# ä½†æ˜¯ä»–ä»¬çš„å­å¯¹è±¡åœ°å€ç›¸åŒ
```

ä»ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºï¼Œaæµ…æ‹·è´å¾—åˆ°bï¼Œaå’ŒbæŒ‡å‘å†…å­˜ä¸­ä¸åŒçš„listå¯¹è±¡ï¼Œä½†æ˜¯ä»–ä»¬çš„å…ƒç´ æŒ‡å‘ç›¸åŒçš„intå¯¹è±¡ï¼Œè¿™å°±æ˜¯æµ…æ‹·è´ã€‚

<font color=DeepSkyBlue>æ·±æ‹·è´</font>æ˜¯æŒ‡åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œç„¶åé€’å½’çš„æ‹·è´åŸå¯¹è±¡æ‰€åŒ…å«çš„å­å¯¹è±¡ã€‚æ·±æ‹·è´å‡ºæ¥çš„å¯¹è±¡ä¸åŸå¯¹è±¡æ²¡æœ‰ä»»ä½•å…³è”ã€‚

æ·±æ‹·è´åªæœ‰ä¸€ç§æ–¹å¼ï¼šcopyæ¨¡å—ä¸­çš„deepcopyå‡½æ•°ã€‚

æˆ‘ä»¬æ¥ä¸‹æ¥ç”¨ä¸€ä¸ªåŒ…å«å¯å˜å¯¹è±¡çš„åˆ—è¡¨æ¥ç¡®åˆ‡åœ°å±•ç¤ºæµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«ï¼š

```
>>> a = [[6, 6], [8, 8], [9, 9]]
>>> b = copy.copy(a)   # æµ…æ‹·è´
>>> c = copy.deepcopy(a) # æ·±æ‹·è´
>>> print(id(a), id(b)) # aå’Œbåœ°å€ä¸åŒ
4493780304 4494523680
>>> for x, y in zip(a, b):   # aå’Œbçš„å­å¯¹è±¡åœ°å€ç›¸åŒ
...     print(id(x), id(y))
... 
4493592128 4493592128
4494528592 4494528592
4493779024 4493779024
>>> print(id(a), id(c))   # aå’Œcä¸åŒ
4493780304 4493469248
>>> for x, y in zip(a, c): # aå’Œcçš„å­å¯¹è±¡åœ°å€ä¹Ÿä¸åŒ
...     print(id(x), id(y))
... 
4493592128 4493687696
4494528592 4493686336
4493779024 4493684896
```


<h2 id="5.pythonçš„åƒåœ¾å›æ”¶æœºåˆ¶">5.Pythonçš„åƒåœ¾å›æ”¶æœºåˆ¶</h2>

åœ¨Pythonä¸­ï¼Œä½¿ç”¨<font color=DeepSkyBlue>å¼•ç”¨è®¡æ•°</font>è¿›è¡Œåƒåœ¾å›æ”¶ï¼›åŒæ—¶é€šè¿‡<font color=DeepSkyBlue>æ ‡è®°-æ¸…é™¤ç®—æ³•</font>è§£å†³å®¹å™¨å¯¹è±¡å¯èƒ½äº§ç”Ÿçš„å¾ªç¯å¼•ç”¨é—®é¢˜ï¼›æœ€åé€šè¿‡<font color=DeepSkyBlue>åˆ†ä»£å›æ”¶ç®—æ³•</font>æé«˜åƒåœ¾å›æ”¶æ•ˆç‡ã€‚


<h2 id="6.pythonä¸­argså’Œkwargsçš„åŒºåˆ«ï¼Ÿ">6.Pythonä¸­$*args$å’Œ$**kwargs$çš„åŒºåˆ«ï¼Ÿ</h2>

$*args$å’Œ$**kwargs$ä¸»è¦ç”¨äºå‡½æ•°å®šä¹‰ã€‚æˆ‘ä»¬å¯ä»¥å°†ä¸å®šæ•°é‡çš„å‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ã€‚

<font color=DeepSkyBlue>è¿™é‡Œçš„ä¸å®šçš„æ„æ€æ˜¯</font>ï¼šé¢„å…ˆå¹¶ä¸çŸ¥é“å‡½æ•°ä½¿ç”¨è€…ä¼šä¼ é€’å¤šå°‘ä¸ªå‚æ•°, æ‰€ä»¥åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ä½¿ç”¨è¿™ä¸¤ä¸ªå…³é”®å­—ã€‚
<h3 id="args">$*args$</h3>

$*args$æ˜¯ç”¨æ¥å‘é€<font color=DeepSkyBlue>ä¸€ä¸ªéé”®å€¼å¯¹çš„å¯å˜æ•°é‡çš„å‚æ•°åˆ—è¡¨</font>ç»™ä¸€ä¸ªå‡½æ•°ã€‚

æˆ‘ä»¬ç›´æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```python
def test_var_args(f_arg, *argv):
    print("first normal arg:", f_arg)
    for arg in argv:
        print("another arg through *argv:", arg)

test_var_args('hello', 'python', 'ddd', 'test')

-----------------ç»“æœå¦‚ä¸‹-----------------------
first normal arg: hello
another arg through *argv: python
another arg through *argv: ddd
another arg through *argv: test
```

<h3 id="kwargs">$**kwargs$</h3>

$**kwargs$å…è®¸æˆ‘ä»¬<font color=DeepSkyBlue>å°†ä¸å®šé•¿åº¦çš„é”®å€¼å¯¹, ä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°</font>ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ä¸€ä¸ªå‡½æ•°é‡Œå¤„ç†å¸¦åå­—çš„å‚æ•°, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨$**kwargs$ã€‚

æˆ‘ä»¬åŒæ ·ä¸¾ä¸€ä¸ªä¾‹å­ï¼š

```python
def greet_me(**kwargs):
    for key, value in kwargs.items():
        print("{0} == {1}".format(key, value))

greet_me(name="yasoob")

-----------ç»“æœå¦‚ä¸‹-------------
name == yasoob
```

<h2 id="7.pythonä¸­numpyçš„broadcastingæœºåˆ¶ï¼Ÿ">7.Pythonä¸­Numpyçš„broadcastingæœºåˆ¶ï¼Ÿ</h2>

Pythonçš„Numpyåº“æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„æ•°å­¦è®¡ç®—åº“ï¼Œå…¶broadcastingæœºåˆ¶ç»™æˆ‘ä»¬çš„çŸ©é˜µè¿ç®—å¸¦æ¥äº†æå¤§åœ°æ–¹ä¾¿ã€‚

æˆ‘ä»¬å…ˆçœ‹ä¸‹é¢çš„ä¸€ä¸ªä¾‹å­ï¼š

```python
>>> import numpy as np
>>> a = np.array([1,2,3])
>>> a
array([1, 2, 3])
>>> b = np.array([6,6,6])
>>> b
array([6, 6, 6])
>>> c = a + b
>>> c
array([7, 8, 9])
```

ä¸Šé¢çš„ä»£ç å…¶å®å°±æ˜¯æŠŠæ•°ç»„$a$å’Œæ•°ç»„$b$ä¸­åŒæ ·ä½ç½®çš„æ¯å¯¹å…ƒç´ ç›¸åŠ ã€‚è¿™é‡Œ$a$å’Œ$b$æ˜¯ç›¸åŒé•¿åº¦çš„æ•°ç»„ã€‚

å¦‚æœä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦ä¸ä¸€è‡´ï¼Œè¿™æ—¶å€™broadcastingå°±å¯ä»¥å‘æŒ¥ä½œç”¨äº†ã€‚

æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š

```python
>>> d = a + 5
>>> d
array([6, 7, 8])
```

broadcastingä¼šæŠŠ$5$æ‰©å±•æˆ$[5,5,5]$ï¼Œç„¶åä¸Šé¢çš„ä»£ç å°±å˜æˆäº†å¯¹ä¸¤ä¸ªåŒæ ·é•¿åº¦çš„æ•°ç»„ç›¸åŠ ã€‚ç¤ºæ„å›¾å¦‚ä¸‹ï¼ˆbroadcastingä¸ä¼šåˆ†é…é¢å¤–çš„å†…å­˜æ¥å­˜å–è¢«å¤åˆ¶çš„æ•°æ®ï¼Œè¿™é‡Œåªæ˜¯æ–¹é¢æè¿°ï¼‰ï¼š

![](https://img-blog.csdnimg.cn/20200902094314838.png#pic_center)

æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹å¤šç»´æ•°ç»„çš„æƒ…å†µï¼š

```python
>>> e
array([[1., 1., 1.],
       [1., 1., 1.],
       [1., 1., 1.]])
>>> e + a
array([[2., 3., 4.],
       [2., 3., 4.],
       [2., 3., 4.]])
```

åœ¨è¿™é‡Œä¸€ç»´æ•°ç»„è¢«æ‰©å±•æˆäº†äºŒç»´æ•°ç»„ï¼Œå’Œ$e$çš„å°ºå¯¸ç›¸åŒã€‚ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://img-blog.csdnimg.cn/2020090209463749.png#pic_center)

æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªéœ€è¦å¯¹ä¸¤ä¸ªæ•°ç»„éƒ½åšbroadcastingçš„ä¾‹å­ï¼š

```python
>>> b = np.arange(3).reshape((3,1))
>>> b
array([[0],
       [1],
       [2]])
>>> b + a
array([[1, 2, 3],
       [2, 3, 4],
       [3, 4, 5]])
```

åœ¨è¿™é‡Œ$a$å’Œ$b$éƒ½è¢«æ‰©å±•æˆç›¸åŒçš„å°ºå¯¸çš„äºŒç»´æ•°ç»„ã€‚ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://img-blog.csdnimg.cn/20200902094859308.png#pic_center)

**æ€»ç»“broadcastingçš„ä¸€äº›è§„åˆ™ï¼š**

1. å¦‚æœä¸¤ä¸ªæ•°ç»„ç»´æ•°ä¸ç›¸ç­‰ï¼Œç»´æ•°è¾ƒä½çš„æ•°ç»„çš„shapeè¿›è¡Œå¡«å……ï¼Œç›´åˆ°å’Œé«˜ç»´æ•°ç»„çš„ç»´æ•°åŒ¹é…ã€‚
2. å¦‚æœä¸¤ä¸ªæ•°ç»„ç»´æ•°ç›¸åŒï¼Œä½†æŸäº›ç»´åº¦çš„é•¿åº¦ä¸åŒï¼Œé‚£ä¹ˆé•¿åº¦ä¸º1çš„ç»´åº¦ä¼šè¢«æ‰©å±•ï¼Œå’Œå¦ä¸€æ•°ç»„çš„åŒç»´åº¦çš„é•¿åº¦åŒ¹é…ã€‚
3. å¦‚æœä¸¤ä¸ªæ•°ç»„ç»´æ•°ç›¸åŒï¼Œä½†æœ‰ä»»ä¸€ç»´åº¦çš„é•¿åº¦ä¸åŒä¸”ä¸ä¸º1ï¼Œåˆ™æŠ¥é”™ã€‚

```python
>>> a = np.arange(3)
>>> a
array([0, 1, 2])
>>> b = np.ones((2,3))
>>> b
array([[1., 1., 1.],
       [1., 1., 1.]])
>>> a.shape
(3,)
>>> a + b
array([[1., 2., 3.],
       [1., 2., 3.]])
```

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æŠ¥é”™çš„ä¾‹å­ï¼š

```python
>>> a = np.arange(3)
>>> a
array([0, 1, 2])
>>> b = np.ones((3,2))
>>> b
array([[1., 1.],
       [1., 1.],
       [1., 1.]])
>>> a + b
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: operands could not be broadcast together with shapes (3,) (3,2)
```


<h2 id="8.pythonä¸­@staticmethodå’Œ@classmethodä½¿ç”¨æ³¨æ„äº‹é¡¹">8.pythonä¸­@staticmethodå’Œ@classmethodä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>

### @staticmethod

1) é™æ€æ–¹æ³•ï¼šstaticmethodå°†ä¸€ä¸ªæ™®é€šå‡½æ•°åµŒå…¥åˆ°ç±»ä¸­ï¼Œä½¿å…¶æˆä¸ºç±»çš„é™æ€æ–¹æ³•ã€‚é™æ€æ–¹æ³•ä¸éœ€è¦ä¸€ä¸ªç±»å®ä¾‹å³å¯è¢«è°ƒç”¨ï¼ŒåŒæ—¶å®ƒä¹Ÿä¸éœ€è¦è®¿é—®ç±»å®ä¾‹çš„çŠ¶æ€ã€‚
2) å‚æ•°ï¼šé™æ€æ–¹æ³•å¯ä»¥æ¥å—ä»»ä½•å‚æ•°ï¼Œä½†é€šå¸¸ä¸ä½¿ç”¨selfæˆ–clsä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚
3) è®¿é—®ï¼šç”±äºé™æ€æ–¹æ³•ä¸ä¾èµ–äºç±»å®ä¾‹çš„çŠ¶æ€ï¼Œå› æ­¤å®ƒä»¬ä¸èƒ½ä¿®æ”¹ç±»æˆ–å®ä¾‹çš„çŠ¶æ€ã€‚
4) ç”¨é€”ï¼šå½“å‡½æ•°ä¸ç±»ç›¸å…³ï¼Œä½†å…¶æ“ä½œä¸ä¾èµ–äºç±»çŠ¶æ€æ—¶ï¼Œé€‚åˆä½¿ç”¨é™æ€æ–¹æ³•ã€‚
### @classmethod
1) ç±»æ–¹æ³•ï¼šclassmethodå°†ä¸€ä¸ªæ–¹æ³•ç»‘å®šåˆ°ç±»è€Œéç±»çš„å®ä¾‹ã€‚ç±»æ–¹æ³•é€šå¸¸ç”¨äºæ“ä½œç±»çº§åˆ«çš„å±æ€§ã€‚
2) å‚æ•°ï¼šç±»æ–¹æ³•è‡³å°‘æœ‰ä¸€ä¸ªå‚æ•°ï¼Œé€šå¸¸å‘½åä¸ºclsï¼Œå®ƒæŒ‡å‘ç±»æœ¬èº«ã€‚
3) è®¿é—®ï¼šç±»æ–¹æ³•å¯ä»¥ä¿®æ”¹ç±»çš„çŠ¶æ€ï¼Œä½†ä¸èƒ½ä¿®æ”¹å®ä¾‹çš„çŠ¶æ€ã€‚
4) ç”¨é€”ï¼šå½“æ–¹æ³•éœ€è¦è®¿é—®æˆ–ä¿®æ”¹ç±»å±æ€§ï¼Œæˆ–è€…éœ€è¦é€šè¿‡ç±»æ¥åˆ›å»ºå®ä¾‹æ—¶ï¼Œé€‚åˆä½¿ç”¨ç±»æ–¹æ³•ã€‚

### ä½¿ç”¨åœºæ™¯
- å½“æ–¹æ³•ä¸éœ€è¦è®¿é—®ä»»ä½•å±æ€§æ—¶ï¼Œä½¿ç”¨staticmethodã€‚
- å½“æ–¹æ³•æ“ä½œçš„æ˜¯ç±»å±æ€§è€Œä¸æ˜¯å®ä¾‹å±æ€§æ—¶ï¼Œä½¿ç”¨classmethodã€‚

### ä»£ç ç¤ºä¾‹
```python
class MyClass:
    class_variable = "I'm a class variable."

    def __init__(self, value):
        self.instance_variable = value

    @staticmethod
    def static_method():
        return "Static method called."

    @classmethod
    def class_method(cls):
        return f"Class method called. Class variable: {cls.class_variable}"

# è°ƒç”¨é™æ€æ–¹æ³•
MyClass.static_method()

# è°ƒç”¨ç±»æ–¹æ³•
MyClass.class_method()

```
### é—®é¢˜
åœ¨ä½¿ç”¨falsk-restfulè¿™ä¸ªæ¡†æ¶è¿›è¡Œæ¨¡å‹éƒ¨ç½²è°ƒç”¨æ—¶ï¼Œå‘ç°æ¨¡å‹æ¨ç†æ—¶é—´å¾ˆå¿«ï¼Œä½†æ˜¯å®Œæ•´çš„ä¸€æ¬¡è¯·æ±‚è¿‡ç¨‹éå¸¸è€—æ—¶ã€‚åœ¨debugçš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œæ¯æ¬¡è¯·æ±‚è°ƒç”¨apiæ¥å£æ—¶ï¼Œæ¨¡å‹çš„æ¨ç†ç±»éƒ½ä¼šè¢«å®ä¾‹åŒ–ï¼Œæ¨ç†ç±»åœ¨æ„é€ çš„æ—¶å€™ï¼Œä¼šåœ¨åˆå§‹åŒ–ä¸­åŠ è½½æ¨¡å‹ï¼ŒåŠ è½½æ¨¡å‹çš„è¿‡ç¨‹æ˜¯è€—æ—¶è¾ƒé•¿çš„ã€‚
### fixbug
```python
classs Infer(object):
    def __init__(self, cfg: dict)->None:
        self.cfg = cfg
        self.load_model(self.cfg)

    @classmethod
    def load_model(cls, cfg: dict):
        cls.cfg = cfg
        if not hasattr(cls, "model"):
            cls.model = torch.load("xxx.pt")
```
é€šè¿‡@classmethodæ–¹æ³•åˆå§‹åŒ–æ¨¡å‹çš„åŠ è½½ï¼Œç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåœ¨åç»­çš„è¯·æ±‚è°ƒç”¨ä¸­ï¼Œä¸ä¼šä¸€ç›´é‡å¤åŠ è½½ã€‚


<h2 id="9.Pythonä¸­æœ‰å“ªäº›å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ">9.Pythonä¸­æœ‰å“ªäº›å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ</h2>

Pythonä½œä¸ºä¸€ç§å¤šèŒƒå¼ç¼–ç¨‹è¯­è¨€ï¼Œæ”¯æŒå¤šç§è®¾è®¡æ¨¡å¼ã€‚ä»¥ä¸‹æ˜¯AIGCã€ä¼ ç»Ÿæ·±åº¦å­¦ä¹ ã€è‡ªåŠ¨é©¾é©¶é¢†åŸŸä¸­Pythonå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼š

### åˆ›å»ºå‹æ¨¡å¼

1. **å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰**
   - ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚
   - **é€šä¿—ä¾‹å­**ï¼šæƒ³è±¡ä¸€ä¸ªç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªæ‰“å°æœºç®¡ç†å™¨ï¼ˆPrinter Managerï¼‰ï¼Œè¿™ä¸ªç®¡ç†å™¨è´Ÿè´£ç®¡ç†æ‰“å°ä»»åŠ¡ã€‚ä¸ºäº†ç¡®ä¿æ‰€æœ‰æ‰“å°ä»»åŠ¡éƒ½èƒ½è¢«ç»Ÿä¸€ç®¡ç†ï¼Œç³»ç»Ÿä¸­åªèƒ½æœ‰ä¸€ä¸ªæ‰“å°æœºç®¡ç†å™¨å®ä¾‹ã€‚
   - **ä»£ç ç¤ºä¾‹**ï¼š
     ```python
     class PrinterManager:
         _instance = None
     
         def __new__(cls, *args, **kwargs):
             if not cls._instance:
                 cls._instance = super(PrinterManager, cls).__new__(cls, *args, **kwargs)
             return cls._instance
     
     pm1 = PrinterManager()
     pm2 = PrinterManager()
     print(pm1 is pm2)  # è¾“å‡º: True
     ```

2. **å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Method Patternï¼‰**
   - å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†è®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚
   - **é€šä¿—ä¾‹å­**ï¼šæƒ³è±¡ä¸€å®¶æ–°èƒ½æºæ±½è½¦å·¥å‚ï¼Œå®ƒæ ¹æ®è®¢å•ç”Ÿäº§ä¸åŒç±»å‹çš„æ±½è½¦ï¼ˆå¦‚è½¿è½¦ã€å¡è½¦ã€SUVï¼‰ã€‚æ¯ç§æ±½è½¦éƒ½æ˜¯ä¸€ä¸ªç±»ï¼Œé€šè¿‡å·¥å‚æ–¹æ³•å†³å®šåˆ›å»ºå“ªç§ç±»å‹çš„æ±½è½¦ã€‚
   - **ä»£ç ç¤ºä¾‹**ï¼š
     ```python
     class Car:
         def drive(self):
             pass
     
     class Sedan(Car):
         def drive(self):
             return "Driving a sedan"
     
     class Truck(Car):
         def drive(self):
             return "Driving a truck"
     
     class CarFactory:
         def create_car(self, car_type):
             if car_type == "sedan":
                 return Sedan()
             elif car_type == "truck":
                 return Truck()
     
     factory = CarFactory()
     car = factory.create_car("sedan")
     print(car.drive())  # è¾“å‡º: Driving a sedan
     ```

3. **æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰**
   - æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚
   - **é€šä¿—ä¾‹å­**ï¼šæƒ³è±¡ä¸€ä¸ªå®¶å…·å•†åº—ï¼Œå®ƒå¯ä»¥ç”Ÿäº§ä¸åŒé£æ ¼ï¼ˆç°ä»£é£æ ¼ã€ç»´å¤šåˆ©äºšé£æ ¼ï¼‰çš„å®¶å…·ã€‚æ¯ç§é£æ ¼éƒ½æœ‰å…¶ç‰¹å®šçš„æ¤…å­å’Œæ¡Œå­ï¼ŒæŠ½è±¡å·¥å‚æä¾›äº†åˆ›å»ºè¿™äº›å®¶å…·çš„æ¥å£ã€‚
   - **ä»£ç ç¤ºä¾‹**ï¼š
     ```python
     class Chair:
         def sit(self):
             pass
     
     class ModernChair(Chair):
         def sit(self):
             return "Sitting on a modern chair"
     
     class VictorianChair(Chair):
         def sit(self):
             return "Sitting on a victorian chair"
     
     class FurnitureFactory:
         def create_chair(self):
             pass
     
     class ModernFurnitureFactory(FurnitureFactory):
         def create_chair(self):
             return ModernChair()
     
     class VictorianFurnitureFactory(FurnitureFactory):
         def create_chair(self):
             return VictorianChair()
     
     factory = ModernFurnitureFactory()
     chair = factory.create_chair()
     print(chair.sit())  # è¾“å‡º: Sitting on a modern chair
     ```

### ç»“æ„å‹æ¨¡å¼

1. **é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰**
   - å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢ä¸ºå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œé€‚é…å™¨æ¨¡å¼ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚
   - **é€šä¿—ä¾‹å­**ï¼šæƒ³è±¡ä½ æœ‰ä¸€ä¸ªè€å¼çš„æ’­æ”¾å™¨ï¼Œå®ƒåªèƒ½æ’­æ”¾CDï¼Œä½†ä½ ç°åœ¨æœ‰ä¸€ä¸ªç°ä»£çš„éŸ³ä¹åº“åœ¨ä½ çš„æ‰‹æœºä¸Šã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé€‚é…å™¨ï¼ŒæŠŠæ‰‹æœºçš„éŸ³ä¹æ ¼å¼è½¬æ¢æˆæ’­æ”¾å™¨èƒ½å¤Ÿæ’­æ”¾çš„æ ¼å¼ã€‚
   - **ä»£ç ç¤ºä¾‹**ï¼š
     ```python
     class OldPlayer:
         def play_cd(self):
             return "Playing music from CD"
     
     class NewPlayer:
         def play_music(self):
             return "Playing music from phone"
     
     class Adapter:
         def __init__(self, new_player):
             self.new_player = new_player
     
         def play_cd(self):
             return self.new_player.play_music()
     
     old_player = OldPlayer()
     print(old_player.play_cd())  # è¾“å‡º: Playing music from CD
     
     new_player = NewPlayer()
     adapter = Adapter(new_player)
     print(adapter.play_cd())  # è¾“å‡º: Playing music from phone
     ```

2. **è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰**
   - åŠ¨æ€åœ°ç»™å¯¹è±¡æ·»åŠ ä¸€äº›èŒè´£ã€‚
   - **é€šä¿—ä¾‹å­**ï¼šæƒ³è±¡æˆ‘ä»¬åœ¨å’–å•¡åº—ç‚¹äº†ä¸€æ¯å’–å•¡ã€‚ä½ å¯ä»¥é€‰æ‹©åœ¨å’–å•¡ä¸ŠåŠ ç‰›å¥¶ã€ç³–æˆ–è€…å·§å…‹åŠ›ã€‚è¿™äº›æ·»åŠ ç‰©æ˜¯è£…é¥°ï¼Œè£…é¥°å™¨æ¨¡å¼å…è®¸æˆ‘ä»¬åŠ¨æ€åœ°æ·»åŠ è¿™äº›è£…é¥°ã€‚
   - **ä»£ç ç¤ºä¾‹**ï¼š
     ```python
     class Coffee:
         def cost(self):
             return 5
     
     class MilkDecorator:
         def __init__(self, coffee):
             self.coffee = coffee
     
         def cost(self):
             return self.coffee.cost() + 1
     
     coffee = Coffee()
     print(coffee.cost())  # è¾“å‡º: 5
     
     milk_coffee = MilkDecorator(coffee)
     print(milk_coffee.cost())  # è¾“å‡º: 6
     ```

3. **ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰**
   - ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚
   - **é€šä¿—ä¾‹å­**ï¼šæƒ³è±¡æˆ‘ä»¬æœ‰ä¸€ä¸ªé“¶è¡Œè´¦æˆ·ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç†ï¼ˆå¦‚é“¶è¡ŒèŒå‘˜æˆ–ATMï¼‰æ¥è®¿é—®æˆ‘ä»¬çš„è´¦æˆ·ï¼Œè€Œä¸éœ€è¦ç›´æ¥å¤„ç†é“¶è¡Œç³»ç»Ÿçš„å¤æ‚æ“ä½œã€‚
   - **ä»£ç ç¤ºä¾‹**ï¼š
     ```python
     class BankAccount:
         def withdraw(self, amount):
             return f"Withdrew {amount} dollars"
     
     class ATMProxy:
         def __init__(self, bank_account):
             self.bank_account = bank_account
     
         def withdraw(self, amount):
             return self.bank_account.withdraw(amount)
     
     account = BankAccount()
     atm = ATMProxy(account)
     print(atm.withdraw(100))  # è¾“å‡º: Withdrew 100 dollars
     ```

### è¡Œä¸ºå‹æ¨¡å¼

1. **è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰**
   - å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œä»¥ä¾¿å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚
   - **é€šä¿—ä¾‹å­**ï¼šæƒ³è±¡æˆ‘ä»¬è®¢é˜…äº†ä¸€ä»½æ‚å¿—ã€‚æ¯å½“æœ‰æ–°ä¸€æœŸæ‚å¿—å‡ºç‰ˆï¼Œæ‚å¿—ç¤¾å°±ä¼šé€šçŸ¥æˆ‘ä»¬ã€‚æˆ‘ä»¬æ˜¯è§‚å¯Ÿè€…ï¼Œæ‚å¿—ç¤¾æ˜¯è¢«è§‚å¯Ÿè€…ã€‚
   - **ä»£ç ç¤ºä¾‹**ï¼š
     ```python
     class Publisher:
         def __init__(self):
             self.subscribers = []
     
         def subscribe(self, subscriber):
             self.subscribers.append(subscriber)
     
         def notify(self):
             for subscriber in self.subscribers:
                 subscriber.update()
     
     class ConcreteSubscriber(Subscriber):
         def update(self):
             print("New magazine issue is out!")
     
     publisher = Publisher()
     subscriber = ConcreteSubscriber()
     publisher.subscribe(subscriber)
     publisher.notify()  # è¾“å‡º: New magazine issue is out!
     ```

2. **ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰**
   - å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚
   - **é€šä¿—ä¾‹å­**ï¼šæƒ³è±¡æˆ‘ä»¬è¦å»æ—…è¡Œï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„äº¤é€šæ–¹å¼ï¼ˆå¦‚å¼€è½¦ã€åç«è½¦ã€åé£æœºï¼‰ã€‚æ¯ç§äº¤é€šæ–¹å¼éƒ½æ˜¯ä¸€ä¸ªç­–ç•¥ï¼Œç­–ç•¥æ¨¡å¼å…è®¸æˆ‘ä»¬åœ¨è¿è¡Œæ—¶é€‰æ‹©ä¸åŒçš„ç­–ç•¥ã€‚
   - **ä»£ç ç¤ºä¾‹**ï¼š
     ```python
     class TravelStrategy:
         def travel(self):
             pass
     
     class CarStrategy(TravelStrategy):
         def travel(self):
             return "Traveling by car"
     
     class TrainStrategy(TravelStrategy):
         def travel(self):
             return "Traveling by train"
     
     class TravelContext:
         def __init__(self, strategy):
             self.strategy = strategy
     
         def travel(self):
             return self.strategy.travel()
     
     context = TravelContext(CarStrategy())
     print(context.travel())  # è¾“å‡º: Traveling by car
     
     context.strategy = TrainStrategy()
     print(context.travel())  # è¾“å‡º: Traveling by train
     ```


<h2 id="10.Pythonä¸­çš„lambdaè¡¨è¾¾å¼ï¼Ÿ">10.Pythonä¸­çš„lambdaè¡¨è¾¾å¼ï¼Ÿ</h2>

Lambda è¡¨è¾¾å¼ï¼Œä¹Ÿç§°ä¸ºåŒ¿åå‡½æ•°ï¼Œæ˜¯ Python ä¸­çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå…è®¸åˆ›å»ºå°å‹çš„ã€ä¸€æ¬¡æ€§ä½¿ç”¨çš„å‡½æ•°ï¼Œè€Œæ— éœ€ä½¿ç”¨ `def` å…³é”®å­—ã€‚

### è¯­æ³•

Lambda å‡½æ•°çš„åŸºæœ¬è¯­æ³•ä¸ºï¼š

```python
lambda å‚æ•°: è¡¨è¾¾å¼
```

### ä¸»è¦ç‰¹å¾

1. Lambda å‡½æ•°å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ã€‚
2. é€šå¸¸ç”¨äºç®€çŸ­ã€ç®€å•çš„æ“ä½œã€‚
3. å½“ lambda å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œè¡¨è¾¾å¼ä¼šè¢«è®¡ç®—å¹¶è¿”å›ç»“æœã€‚

### ç¤ºä¾‹

#### åŸºæœ¬ç”¨æ³•

```python
f = lambda x: x * 2
print(f(3))  # è¾“å‡º: 6
```

#### å¤šä¸ªå‚æ•°

```python
g = lambda x, y: x + y
print(g(2, 3))  # è¾“å‡º: 5
```

#### åœ¨é«˜é˜¶å‡½æ•°ä¸­çš„åº”ç”¨

Lambda å‡½æ•°ç»å¸¸ä¸ `map()`ã€`filter()` å’Œ `sort()` ç­‰å‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚

```python
# æŒ‰å•è¯ä¸­å”¯ä¸€å­—æ¯çš„æ•°é‡å¯¹å•è¯åˆ—è¡¨è¿›è¡Œæ’åº
sorted_words = sorted(words, key=lambda word: len(set(word)))
```

### ä¼˜ç‚¹

1. ç®€æ´ï¼šLambda å‡½æ•°å…è®¸å†…è”å‡½æ•°å®šä¹‰ï¼Œä½¿ä»£ç æ›´åŠ ç´§å‡‘ã€‚
2. å¯è¯»æ€§ï¼šå¯¹äºç®€å•æ“ä½œï¼Œlambda å¯ä»¥é€šè¿‡æ¶ˆé™¤å•ç‹¬çš„å‡½æ•°å®šä¹‰æ¥æé«˜ä»£ç å¯è¯»æ€§ã€‚
3. å‡½æ•°å¼ç¼–ç¨‹ï¼šLambda å‡½æ•°åœ¨å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ä¸­å¾ˆæœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨é«˜é˜¶å‡½æ•°æ—¶ã€‚

### å±€é™æ€§

1. å•ä¸€è¡¨è¾¾å¼ï¼šLambda å‡½æ•°é™äºå•ä¸€è¡¨è¾¾å¼ï¼Œè¿™é™åˆ¶äº†å®ƒä»¬çš„å¤æ‚æ€§ã€‚
2. å¯è¯»æ€§ï¼šå¯¹äºæ›´å¤æ‚çš„æ“ä½œï¼Œä¼ ç»Ÿçš„å‡½æ•°å®šä¹‰å¯èƒ½æ›´åˆé€‚ä¸”æ›´æ˜“è¯»ã€‚

Lambda å‡½æ•°ä¸º Python ä¸­åˆ›å»ºå°å‹åŒ¿åå‡½æ•°æä¾›äº†å¼ºå¤§çš„å·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºå‡½æ•°å¼ç¼–ç¨‹å’Œå¤„ç†é«˜é˜¶å‡½æ•°çš„åœºæ™¯ã€‚


<h2 id="11.ä»‹ç»ä¸€ä¸‹Pythonä¸­çš„å¼•ç”¨è®¡æ•°åŸç†ï¼Œå¦‚ä½•æ¶ˆé™¤ä¸€ä¸ªå˜é‡ä¸Šçš„æ‰€æœ‰å¼•ç”¨è®¡æ•°?">11.ä»‹ç»ä¸€ä¸‹Pythonä¸­çš„å¼•ç”¨è®¡æ•°åŸç†ï¼Œå¦‚ä½•æ¶ˆé™¤ä¸€ä¸ªå˜é‡ä¸Šçš„æ‰€æœ‰å¼•ç”¨è®¡æ•°?</h2>

Pythonä¸­çš„å¼•ç”¨è®¡æ•°æ˜¯åƒåœ¾å›æ”¶æœºåˆ¶çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥è·Ÿè¸ªå¯¹è±¡çš„å¼•ç”¨æ•°é‡ã€‚

### å¼•ç”¨è®¡æ•°åŸç†

1. **åˆ›å»ºå¯¹è±¡**ï¼šå½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå…¶å¼•ç”¨è®¡æ•°åˆå§‹åŒ–ä¸º1ã€‚
2. **å¢åŠ å¼•ç”¨**ï¼šæ¯å½“æœ‰ä¸€ä¸ªæ–°çš„å¼•ç”¨æŒ‡å‘è¯¥å¯¹è±¡æ—¶ï¼ˆä¾‹å¦‚ï¼Œå°†å¯¹è±¡èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡æˆ–å°†å…¶æ·»åŠ åˆ°ä¸€ä¸ªæ•°æ®ç»“æ„ä¸­ï¼‰ï¼Œå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å¢åŠ ã€‚
3. **å‡å°‘å¼•ç”¨**ï¼šæ¯å½“ä¸€ä¸ªå¼•ç”¨ä¸å†æŒ‡å‘è¯¥å¯¹è±¡æ—¶ï¼ˆä¾‹å¦‚ï¼Œå˜é‡è¢«é‡æ–°èµ‹å€¼æˆ–è¢«åˆ é™¤ï¼‰ï¼Œå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡å°‘ã€‚
4. **åˆ é™¤å¯¹è±¡**ï¼šå½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°é™åˆ°0æ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰ä»»ä½•å¼•ç”¨æŒ‡å‘è¯¥å¯¹è±¡ï¼ŒPythonçš„åƒåœ¾å›æ”¶å™¨å°±ä¼šé”€æ¯è¯¥å¯¹è±¡å¹¶é‡Šæ”¾å…¶å ç”¨çš„å†…å­˜ã€‚

### å®ç°å¼•ç”¨è®¡æ•°çš„ä¾‹å­

```python
# åˆ›å»ºå¯¹è±¡
a = [1, 2, 3]  # å¼•ç”¨è®¡æ•°ä¸º1

# å¢åŠ å¼•ç”¨
b = a          # å¼•ç”¨è®¡æ•°ä¸º2
c = a          # å¼•ç”¨è®¡æ•°ä¸º3

# å‡å°‘å¼•ç”¨
del b          # å¼•ç”¨è®¡æ•°ä¸º2
c = None       # å¼•ç”¨è®¡æ•°ä¸º1
del a          # å¼•ç”¨è®¡æ•°ä¸º0ï¼Œå¯¹è±¡è¢«é”€æ¯
```

### è·å–å¯¹è±¡çš„å¼•ç”¨è®¡æ•°

å¯ä»¥ä½¿ç”¨`sys`æ¨¡å—ä¸­çš„`getrefcount`å‡½æ•°æ¥è·å–å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼š

```python
import sys

a = [1, 2, 3]
print(sys.getrefcount(a))  # é€šå¸¸ä¼šæ¯”å®é™…å¼•ç”¨å¤š1ï¼Œå› ä¸ºgetrefcountæœ¬èº«ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶å¼•ç”¨
```

### å¦‚ä½•æ¶ˆé™¤ä¸€ä¸ªå˜é‡ä¸Šçš„æ‰€æœ‰å¼•ç”¨è®¡æ•°

ä¸ºäº†ç¡®ä¿ä¸€ä¸ªå¯¹è±¡ä¸Šçš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«æ¸…é™¤ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **åˆ é™¤æ‰€æœ‰å˜é‡å¼•ç”¨**ï¼šä½¿ç”¨`del`è¯­å¥åˆ é™¤æ‰€æœ‰å¼•ç”¨è¯¥å¯¹è±¡çš„å˜é‡ã€‚
2. **æ¸…é™¤å®¹å™¨å¼•ç”¨**ï¼šå¦‚æœå¯¹è±¡å­˜åœ¨äºå®¹å™¨ï¼ˆå¦‚åˆ—è¡¨ã€å­—å…¸ã€é›†åˆï¼‰ä¸­ï¼Œåˆ™éœ€è¦ä»è¿™äº›å®¹å™¨ä¸­ç§»é™¤å¯¹è±¡ã€‚
3. **å…³é—­å¾ªç¯å¼•ç”¨**ï¼šå¦‚æœå¯¹è±¡å­˜åœ¨å¾ªç¯å¼•ç”¨ï¼ˆå³å¯¹è±¡ç›¸äº’å¼•ç”¨ï¼‰ï¼Œéœ€è¦æ‰‹åŠ¨æ–­å¼€è¿™äº›å¼•ç”¨ï¼Œæˆ–ä½¿ç”¨Pythonçš„åƒåœ¾å›æ”¶å™¨æ¥å¤„ç†ã€‚

```python
import gc

# åˆ›å»ºå¯¹è±¡å¹¶å¼•ç”¨
a = [1, 2, 3]
b = a
c = {'key': a}

# åˆ é™¤å˜é‡å¼•ç”¨
del a
del b

# ç§»é™¤å®¹å™¨å¼•ç”¨
del c['key']

# å¼ºåˆ¶åƒåœ¾å›æ”¶ä»¥æ¸…é™¤å¾ªç¯å¼•ç”¨
gc.collect()
```

ä½¿ç”¨ä¸Šè¿°æ–¹æ³•ï¼Œå¯ä»¥ç¡®ä¿å¯¹è±¡çš„å¼•ç”¨è®¡æ•°é™ä¸º0ï¼Œå¹¶ä¸”å¯¹è±¡è¢«é”€æ¯å’Œå†…å­˜è¢«é‡Šæ”¾ã€‚

### å¾ªç¯å¼•ç”¨é—®é¢˜

å¾ªç¯å¼•ç”¨ä¼šå¯¼è‡´å¼•ç”¨è®¡æ•°æ— æ³•æ­£å¸¸å·¥ä½œï¼Œè¿™æ—¶éœ€è¦ä¾é Pythonçš„åƒåœ¾å›æ”¶å™¨æ¥æ£€æµ‹å’Œå¤„ç†å¾ªç¯å¼•ç”¨ã€‚

```python
import gc

class Node:
    def __init__(self, value):
        self.value = value
        self.next = None

# åˆ›å»ºå¾ªç¯å¼•ç”¨
node1 = Node(1)
node2 = Node(2)
node1.next = node2
node2.next = node1

# åˆ é™¤å˜é‡
del node1
del node2

# å¼ºåˆ¶åƒåœ¾å›æ”¶ä»¥å¤„ç†å¾ªç¯å¼•ç”¨
gc.collect()
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ`node1`å’Œ`node2`ç›¸äº’å¼•ç”¨ï¼Œå½¢æˆäº†ä¸€ä¸ªå¾ªç¯å¼•ç”¨ã€‚å³ä½¿åˆ é™¤äº†`node1`å’Œ`node2`ï¼Œå®ƒä»¬ä¹Ÿä¸ä¼šè¢«ç«‹å³é”€æ¯ï¼Œå› ä¸ºå¼•ç”¨è®¡æ•°ä¸ä¸º0ã€‚è¿™æ—¶ï¼Œéœ€è¦è°ƒç”¨`gc.collect()`æ¥å¼ºåˆ¶åƒåœ¾å›æ”¶å™¨å¤„ç†è¿™äº›å¾ªç¯å¼•ç”¨ã€‚
